<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Interview AI</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #1a1a1a;
      color: #fff;
    }

    #mainContainer {
      display: flex;
      max-width: 800px;
      margin: 50px auto;
      background-color: #333;
      box-shadow: 0 0 10px rgba(255, 223, 0, 0.1);
      border-radius: 5px;
      overflow: hidden;
    }

    #transcribeContainer,
    #responseContainer {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    #transcribeContainer {
      border-right: 1px solid #555;
    }

    #textContainer {
      margin-bottom: 20px;
    }

    #recordButtonContainer {
      margin-bottom: 20px;
    }

    #recordSocket {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      background-color: #4caf50;
      color: #fff;
      border-radius: 5px;
    }

    #recordSocket.recordActive {
      background-color: #f44336;
    }

    #headerText {
      margin-bottom: 20px;
    }

    #transcribedText,
    #responseText {
      min-height: 100px;
      border: 1px solid #555;
      padding: 10px;
      background-color: #1a1a1a;
      overflow: auto;
      flex: 1;
      width: 100%;
    }

    .button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      background-color: #4285f4;
      color: #fff;
      border-radius: 5px;
    }

    .button:hover {
      background-color: #357ae8;
    }
  </style>
</head>

<body>
  <div id="mainContainer">
    <div id="transcribeContainer">
      <div id="textContainer">
        <h1>Interview AI - Transcribe</h1>
        <p>Real-Time implementation using AWS sockets and ChatGpt-Model4, generate quick answers for your Interview. Made by @Abiorh.</p>
        <p>To run the application, click on "Start Transcription," and make sure you share the screen you want to capture the audio correctly.</p>
      </div>
      <div id="recordButtonContainer">
        <button id="recordSocket" class="recordInactive" onclick="onRecordSocketPress()">Start Transcription</button>
      </div>
      <div id="headerText">
        <h2>Transcription</h2>
      </div>
      <div id="transcribedText"></div>
      <button class="button" onclick="stopRecording()">Stop Transcription</button>
    </div>
    <div id="responseContainer">
      <div id="textContainer">
        <h1>Interview AI - Responses</h1>
        <!-- Add any additional content for responses -->
      </div>
      <div id="headerText">
        <h2>Responses</h2>
      </div>
      <div id="responseText"></div>
    </div>
  </div>

  <script defer type="text/javascript" src="./src/main.js"></script>
  <script>
    const recordButtonSocket = document.getElementById("recordSocket");
    const transcribedText = document.getElementById("transcribedText");
    const responseText = document.getElementById("responseText");

    function startRecording(type) {
      window.clearTranscription();
      try {
        if (type === "socket") {
          // Replace with your actual implementation of TranscribeSocket.startRecording
          // TranscribeSocket.startRecording(onTranscriptionDataReceived);
          console.log("Start recording...");
        }
      } catch (error) {
        alert("An error occurred while recording: " + error.message);
        stopRecording();
      }
    }

    function stopRecording() {
      // Replace with your actual implementation of TranscribeSocket.stopRecording
      // TranscribeSocket.stopRecording();
      console.log("Stop recording...");
      recordButtonSocket.setAttribute("class", "recordInactive");
    }

    function updateTranscription(data) {
      // Implement the updateTranscription function if not already defined
      transcribedText.innerHTML += data;
      transcribedText.scrollTop = transcribedText.scrollHeight;
      sendDataToBackend(data);
    }

    function sendDataToBackend(data) {
      try {
        // Replace with your actual implementation of sending data to the backend
        console.log("Sending data to backend:", data);
      } catch (error) {
        console.error("Error sending/receiving data:", error);
      }
    }

    function onRecordSocketPress() {
      const recordButton = document.getElementById("recordSocket");

      if (recordButton.classList.contains("recordActive")) {
        // Stop transcription
        recordButton.textContent = "Start Transcription";
        recordButton.classList.remove("recordActive");
        stopRecording();
      } else {
        // Start transcription
        recordButton.textContent = "Stop Transcription";
        recordButton.classList.add("recordActive");
        startRecording("socket");
      }
    }

    window.clearTranscription = () => {
      transcribedText.innerHTML = "";
    };
  </script>
</body>

</html>
